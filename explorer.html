<!doctype html>
<title>Silver Explorer</title>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<meta name="theme-color" content="#EFEFEF">
<meta name="application-name" content="Silver Explorer">
<link rel="icon" href="../ExplorerIcon.png" type="image/png">

<style>

    .context-menu {
        position: absolute;
        text-align: left;
        padding-left: 8px;
        background: lightgray;
        border: 2px solid grey;
        border-radius: 5px;
        font-size: 14px;
    }
  
    .context-menu ul {
        padding: 0px;
        margin: 0px;
        min-width: 150px;
        list-style: none;
    }
  
    .context-menu ul li {
        padding-bottom: 4px;
        padding-top: 4px;
    }
  
    .context-menu ul li a {
        text-decoration: none;
        color: black;
    }
  
    .context-menu ul li:hover {
        background: darkgray;
    }
    
    * {
      padding: 0;
      margin: 0;
    }
    
    html, body {
      height: 100%;
      
      display: flex;
      flex-direction: column;
    }
      body {
        height: 100vh;
        width: 100vw;
      }
      * {
        box-sizing: border-box;
      }
      embed {
        flex-grow: 1;
        width: 100%;
        padding: 0px;
        background-color: #EFEFEF;
      }
    </style>

<body style="background-color:#555;">

<div id="contextMenu" class="context-menu" 
    style="display: none">
    <ul>
        <li style="font-family: Verdana, sans-serif; cursor: pointer; color: black;" onclick="reload();">Reload</li>
        <li style="font-family: Verdana, sans-serif; cursor: pointer; color: black;" onclick="home();">Home</li>
        <li style="font-family: Verdana, sans-serif; cursor: pointer; color: black;" onclick="openFullscreen();">Fullscreen</li>
        <li style="font-family: Verdana, sans-serif; cursor: pointer; color: black;" onclick="search();">Search</li>
        <li style="font-family: Verdana, sans-serif; cursor: pointer; color: black;" onclick="bingSearch();">Search with Bing</li>
        <li style="font-family: Verdana, sans-serif; cursor: pointer; color: black;" onclick="returnText();">Go</li>
    </ul>
</div>

<div style="display: flex;">

<div style="font-family: Verdana, sans-serif; background: #555; padding 2px; float: right;">

<b><i style="cursor: pointer; color: white;" onclick="home();" class="material-icons">home</i></b>

<b><i style="cursor: pointer; color: white;" onclick="reload();" class="material-icons">refresh</i></b>

</div>

<input id="myInput" autocomplete="on" style= "outline: none; font-family: Verdana, sans-serif; color: black; background: #EEE; border: 2px solid #555; padding: 2px; flex-grow: 1;" type="text" placeholder=""></input>

<div style="font-family: Verdana, sans-serif; background: #555; padding 2px; float: right;">

<b><i style="cursor: pointer; color: white;" onclick="search()" class="material-icons">search</i></b>

<b><i style="cursor: pointer; color: white;" onclick="openFullscreen();" class="material-icons">fullscreen</i></b>

<b><i style="cursor: pointer; color: white;" onclick="" class="material-icons">more_vert</i></b>

</div>

<button hidden id="go" style="outline: none; background-color: transparent;" onclick="returnText()"></button>
</div>
   
<embed id="website" src="//www.metacrawler.com">
<script type="text/javascript">
function returnText(){
    let input = document.getElementById("myInput").value;
    let testIfWebsite = "."
    if (input.includes(testIfWebsite)) {
	let testIfWebsite = "://"
    if (input.includes(testIfWebsite)) {
    document.getElementById('website').setAttribute('src', input)
    } else { document.getElementById('website').setAttribute('src', "//" + input)
    }
} else {
	document.getElementById('website').setAttribute('src', "https://www.metacrawler.com/serp?q=" + input)
}
    reload();
    inputRefresh();
    setTimeout(reload, 500)
    setTimeout(inputRefresh, 1000)
    
}

function search(){
    let input = document.getElementById("myInput").value;
    document.getElementById('website').setAttribute('src', "https://www.metacrawler.com/serp?q=" + input)
    reload();
    inputRefresh();
    setTimeout(reload, 500)
    setTimeout(inputRefresh, 1000)
    
}

function bingSearch(){
    let input = document.getElementById("myInput").value;
    document.getElementById('website').setAttribute('src', "https://www.bing.com/search?q=" + input)
    reload();
    inputRefresh();
    setTimeout(reload, 500)
    setTimeout(inputRefresh, 1000)
    
}

var website = document.getElementById("myInput");
website.addEventListener("keyup", function(event) {
  if (event.keyCode === 13) {
    event.preventDefault();
    document.getElementById("go").click();
  }
});

var elem = document.getElementById("website");
function openFullscreen() {
  if (elem.requestFullscreen) {
    elem.requestFullscreen();
  } else if (elem.webkitRequestFullscreen) { /* Safari */
    elem.webkitRequestFullscreen();
  } else if (elem.msRequestFullscreen) { /* IE11 */
    elem.msRequestFullscreen();
  }
}

function reload() {
            document.getElementById('website').src += '';
            inputRefresh();
        }
        
function inputRefresh() {
            let site = document.getElementById('website').getAttribute('src');
            document.getElementById("myInput").value = site
}
        
function home() {
    document.getElementById('website').setAttribute('src', "https://www.metacrawler.com")
    document.getElementById("myInput").value = ""
}

document.oncontextmenu = rightClick;
  
function rightClick(clickEvent) {
    clickEvent.preventDefault();
    
}

    document.onclick = hideMenu;
    document.oncontextmenu = rightClick;
      
    function hideMenu() {
        document.getElementById("contextMenu")
                .style.display = "none"
    }
  
    function rightClick(e) {
        e.preventDefault();
  
        if (document.getElementById("contextMenu")
                .style.display == "block")
            hideMenu();
        else{
            var menu = document.getElementById("contextMenu")
  
            menu.style.display = 'block';
            menu.style.left = e.pageX + "px";
            menu.style.top = e.pageY + "px";
        }
    }
    
</script>
